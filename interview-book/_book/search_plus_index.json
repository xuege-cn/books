{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-03 16:08:07 "},"interview/":{"url":"interview/","title":"æ¯æ—¥ä¸€é¢˜","keywords":"","body":"æ¯æ—¥ä¸€é¢˜ ä¸€å¤©ä¸€é¢˜ç»ƒä¹  Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-06 19:33:17 "},"interview/vue/":{"url":"interview/vue/","title":"vue","keywords":"","body":"è¿™é‡Œæ˜¯vueä¸“é¢˜ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-03 16:11:09 "},"interview/vue/1/1.html":{"url":"interview/vue/1/1.html","title":"çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ","keywords":"","body":" è§£æ³•1: @hook @hook:æ­é…ä»»æ„é’©å­å‡½æ•°ï¼Œä¼šåœ¨å­ç»„ä»¶è§¦å‘ç›¸åº”ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ—¶å›žè°ƒçˆ¶ç»„ä»¶è¿™ä¸ªå‡½æ•° è§£æ³•2: $emit è¿™ç§æ–¹å¼æ¯”è¾ƒè ¢ï¼Œè€Œä¸”æ˜¯éœ€è¦åŠ³åŠ¨åŠ›å †ç§¯çš„ mounted () { this.$emit('mounted') } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-03 16:36:45 "},"interview/vue/2/1.html":{"url":"interview/vue/2/1.html","title":"$setè§£å†³æ–°å¢žå±žæ€§ä¸èƒ½ç›¸åº”çš„é—®é¢˜","keywords":"","body":" è§£ç­”ï¼š æ˜¯å› ä¸ºVueåœ¨å®žä¾‹åŒ–çš„è¿‡ç¨‹ä¸­å°±éœ€è¦å¯¹dataä¸­çš„æ•°æ®ä½¿ç”¨definePropertyæ–¹æ³•æ¥å®šä¹‰å­˜å–å™¨å®žçŽ°çš„å“åº”å¼ã€‚è€Œç›´æŽ¥æ–°å¢žå±žæ€§å› ä¸ºä»æ˜¯å€¼å±žæ€§ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½å®žçŽ°å“åº”å¼çš„ æºç å®žçŽ° const isValidArrayIndex = index => { return index > 0 && Math.floor(index) === index && isFinite(index) } exprt function set (target, key, val) { if (Array.isArray(target) && isValidArrayIndex(key)) { target.length = Math.max(target.length, key) target.splice(key, 1, val) return val } if (key in target && !(key in target.prototype)) { target[key] = val return val } const __ob__ = target.__ob__ if (!__ob__) { target[key] = val return val } else { defineReactive(__ob__.value, key, val) __ob__.dep.notify() return val } } setåˆ†ä¸ºå››æ­¥éª¤ï¼š åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„ï¼Œä»¥åŠç´¢å¼•æ˜¯å¦åˆæ³• Array.isArrayåˆ¤æ–­targetæ˜¯å¦ä¸ºæ•°ç»„ ç´¢å¼•æ˜¯å¦åˆæ³•ï¼šindex > 0 && Math.floor(index) === index && isFinite(index) æ•°ç»„å¯èƒ½ä¸å¤Ÿé•¿ï¼Œå…ˆæŠŠæ•°ç»„æ‰©å……ä¸‹ï¼štarget.length = Math.max(target.length, key) é€šè¿‡spliceå¾€æ•°ç»„ä¸­æ·»åŠ ï¼štarget.splice(key, 1, val) åˆ¤æ–­targetå¯¹è±¡ä¸‹æ˜¯å¦å·²ç»è¯¥å±žæ€§key å­˜åœ¨çš„è¯å°±æ˜¯ä¿®æ”¹æ“ä½œï¼Œç›´æŽ¥target[key] = valï¼Œé€šè¿‡setterå­˜å–å™¨è§¦å‘notify targetæ˜¯å¦å·²è¢«å“åº”å¼ å¦ï¼šä¸ç®¡å“åº”å¼ï¼Œtarget[key] = valå®Œäº‹ å·²è®¾ç½®å“åº”å¼ï¼ŒdefineReactive(ob.value, key, val), ob.dep.notify()è§¦å‘æ›´æ–° definePropertyçš„ç¼ºç‚¹ ä»Žè¿™ä¸ªé—®é¢˜å¯ä»¥çœ‹å‡ºï¼šdefinePropertyå®žçŽ°å“åº”å¼ï¼Œéœ€è¦åœ¨vueå®žä¾‹åŒ–æ—¶å¯¹æ‰€æœ‰å±žæ€§è¿›è¡Œé‡å®šä¹‰ï¼Œä¸ç„¶çš„è¯å°±ä¸èƒ½å®žçŽ°å“åº”å¼æœ‰ç‚¹ç±»ä¼¼äº‹ä»¶ç»‘å®šæ—¶ï¼Œå¯¹å•ä¸ªèŠ‚ç‚¹ Proxyçš„ä½¿ç”¨ let obj = { a: 1, b: 2 } let obj1 = new Proxy(obj, { get (obj, prop) { console.log(`æ­£åœ¨èŽ·å–å±žæ€§ï¼š${prop}ï¼Œå€¼ä¸ºï¼š${obj[prop]}`) return obj[prop] } }) obj1.a obj1.b Proxyç±»ä¼¼äº‹ä»¶å§”æ‰˜ï¼ŒæŠŠå±žæ€§è®¿é—®å§”æ‰˜åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå¯æ˜¯ä¸å…·ä½“å…³å¿ƒæ˜¯ä»€ä¹ˆå±žæ€§ï¼Œæ‰€ä»¥åœ¨Vueå®žä¾‹åŒ–é˜¶æ®µå‡å°‘äº†å¯¹dataä¸‹æ‰€æœ‰å±žæ€§è¿›è¡ŒdefinePropertyå®šä¹‰å­˜å–å™¨ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-06 19:21:01 "},"interview/vue/3/1.html":{"url":"interview/vue/3/1.html","title":"è‡ªå®šä¹‰æŒ‡ä»¤å®žçŽ°å›¾ç‰‡æ‡’åŠ è½½","keywords":"","body":" å›¾ç‰‡æ‡’åŠ è½½çš„ä¸‰ç§å®žçŽ°æ–¹å¼ scrolläº‹ä»¶ + getBoundingClientRect const imgs = document.getElementsByTagName('img') const body = document.body function imgLoad () { for (let img of imgs) { const clientRect = img.getBoundingClientRect() if (clientRect.bottom { timer = null func.apply(this, args) }, wait) } } } document.addEventListener('scroll', throttle(imgLoad, 0)) imgLoad() InsectionObserver const imgs = document.getElementsByTagName('img') const intersectionObserver = new IntersectionObserver(function(entries) { for (let entry of entries) { if (entry.intersectionRatio > 0) { const target = entry.target target.style.height = 'auto' target.src = target.getAttribute('data-src') intersectionObserver.unobserve(target) } } }) for (let img of imgs) { intersectionObserver.observe(img) } æµè§ˆå™¨åŽŸç”Ÿæ”¯æŒloading=\"lazy\" Vueè‡ªå®šä¹‰æŒ‡ä»¤ + å›¾ç‰‡æ‡’åŠ è½½ æ¨¡ç‰ˆï¼š const intersectionObserver = new IntersectionObserver(function(entries) { for (let entry of entries) { if (entry.intersectionRatio > 0) { const target = entry.target target.style.height = 'auto' target.src = target.getAttribute('data-src') intersectionObserver.unobserve(target) } } }) directives: { lazy: { inserted: function (el) { intersectionObserver.observe(el) } } } directiveçš„é’©å­å‡½æ•° bindï¼šæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ insertedï¼šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ updateï¼šæ‰€åœ¨ç»„ä»¶VNodeæ›´æ–°æ—¶è°ƒç”¨ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-03 15:50:13 "},"interview/js/":{"url":"interview/js/","title":"js","keywords":"","body":"jsé«˜é¢‘é¢˜ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-02 15:11:57 "},"interview/js/1/1.html":{"url":"interview/js/1/1.html","title":"å†™ä¸€ä¸ªæ·±æ‹·è´ï¼Œè€ƒè™‘ æ­£åˆ™ï¼ŒDateè¿™ç§ç±»åž‹çš„æ•°æ®","keywords":"","body":" è§£ç­” æ–¹æ¡ˆä¸€ï¼šJSON.parse(JSON.stringify(source)) ç¼ºç‚¹ï¼š undefined, å‡½æ•°ï¼Œsymbolå€¼ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥ ä¸èƒ½å¤„ç†Bigintç±»åž‹çš„æ•°æ®å’Œå¾ªçŽ¯å¼•ç”¨ï¼Œä¼šæŠ¥é”™ Mapï¼ŒSetï¼ŒRegExpç±»åž‹çš„æ•°æ®ï¼Œä¼šå¼•ç”¨ä¸¢å¤±ï¼Œå˜æˆç©ºå€¼ Dateç±»åž‹çš„æ•°æ®ä¼šè¢«å½“ä½œå­—ç¬¦ä¸²å¤„ç† NaNï¼ŒInfinityï¼Œnulléƒ½ä¼šè¢«å½“ä½œnull Map/Set/WeakMap/WeakSet ä»…ä¼šåºåˆ—åŒ–å¯æžšä¸¾çš„æ•°æ® æ–¹æ¡ˆäºŒï¼šåˆ¤æ–­ç±»åž‹ä¸ºobject åˆ¤æ–­å‚æ•°ç±»åž‹ä¸ºobjectåŽï¼Œå¤åˆ¶é”®/å€¼åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå¦åˆ™è¿”å›žæºå¯¹è±¡ function deepClone (source) { if (typeof source === 'object') { const result = Array.isArray(source) ? [] : {} for (let key in source) { const prop = source[key] if (typeof prop === 'object') { result[key] = deepClone(prop) } else { result[key] = prop } } return result } return source } æ–¹æ¡ˆä¸‰ï¼šReflectä»£ç†æ³• Reflect.ownKeyså¯ä»¥èŽ·å–ä¸å¯æžšä¸¾å±žæ€§ï¼ŒObject.keysåªèƒ½åˆ—ä¸¾å¯æžšä¸¾å±žæ€§ function deepClone (obj) { if (typeof obj === 'object') { let cloneObj = Array.isArray(obj) ? [] : {} Reflect.ownKeys(cloneObj).forEach(key => { const prop = obj[key] cloneObj[key] = typeof prop === 'object' ? deepClone(prop) : obj[key] }) return cloneObj } return obj } æ–¹æ¡ˆå››ï¼šç»ˆæžæ–¹æ¡ˆ æ–¹æ¡ˆäºŒå’Œæ–¹æ¡ˆä¸‰çš„æ€æƒ³éƒ½æ˜¯éåŽ†å±žæ€§ï¼Œç„¶åŽé‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯ä»ç„¶è§£å†³ä¸äº†Mapï¼ŒSetï¼ŒRegExpï¼ŒDateä¹‹ç±»çš„é—®é¢˜æ·±æ‹·è´çš„å‡ ä¸ªç‰¹æ®Šç±»åž‹ï¼š Date Map Set RegExp Function Symbol æ—¥æœŸæ‹·è´ let source = new Date() let copy = new date.constructor(source) Mapæ‹·è´ let source = new Map([['name', 'xuqiang'], ['age', 29]]) let copy = new Map() source.forEach((val, key) => { copy.set(key, val) }) Setæ‹·è´ let source = new Set([1, 2, 3, 4, 5]) let copy = new Set() source.forEach(item => { copy.add(item) }) RegExpæ‹·è´ let source = /a/ let copy = new source.constructor(source.source, /\\w*$/.exec(source)) copy.lastIndex = source.lastIndex Symbolæ‹·è´ let source = { [Symbol('name')]: Symbol('xuqiang') } let copy = {} let symbols = Object.getOwnPropertySymbols(source) for (let symbol of symbols) { copy[symbol] = source[symbol] } å‡½æ•°çš„æ‹·è´ å‡½æ•°è½¬å­—ç¬¦ä¸² function func (name, age) { console.log(name, age) } const funcString = func.toString() å­—ç¬¦ä¸²è½¬å‡½æ•° // æ–¹æ¡ˆä¸€: const func = eval(`(${funcString})`) // æ–¹æ¡ˆäºŒï¼š const func = new Function('return ' + funcString)() åŒ¹é…å‚æ•°å’Œå‡½æ•°ä½“ åŒ¹é…å‚æ•° const paramReg = /(?åŒ¹é…å‡½æ•°ä½“ const bodyReg = /(?å‡½æ•°æ‹·è´çš„ä¸¤ç§æ–¹æ³• eval const funcString = func.toString() const funcCopy = eval(`(${funcString})`) new Function ``` const paramReg = /(?(?=)\\s[{|=>])/ const bodyReg = /(? const param = paramReg.exec(funcString) const bodyReg = bodyReg.exec(funcString) if (body) { if (param) { const params = param[0].split(',') new Function (...params, body[0]) } else { new Function (body[0]) } } ``` Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-02 20:25:50 "},"interview/js/2/1.html":{"url":"interview/js/2/1.html","title":"æœ‰1000ä¸ªdomï¼Œéœ€è¦æ›´æ–°å…¶ä¸­çš„100ä¸ªï¼Œå¦‚ä½•æ“ä½œæ‰èƒ½å‡å°‘domçš„æ“ä½œï¼Ÿ","keywords":"","body":" è§£ç­” æ€§èƒ½ç“¶é¢ˆï¼š DOMè®¿é—® DOMä¿®æ”¹å¯¼è‡´é‡ç»˜å’Œé‡æŽ’ ç¼“å­˜DOMå¯¹è±¡ å°†DOMå¯¹è±¡ç¼“å­˜ã€‚é¿å…é‡å¤æŸ¥è¯¢ æ–‡æ¡£ç‰‡æ®µ åœ¨æ–‡æ¡£ç‰‡æ®µä¸Šæ·»åŠ domèŠ‚ç‚¹ï¼Œä¸ä¼šå½±å“åˆ°çœŸæ˜¯çš„domç»“æž„å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹å°†éœ€è¦ä¿®æ”¹çš„domä¸€å¹¶ä¿®æ”¹å®Œï¼Œä¿å­˜è‡³æ–‡æ¡£ç‰‡æ®µä¸­ï¼Œé¿å…é¢‘ç¹ä¿®æ”¹domè€Œå¯¼è‡´çš„é‡æŽ’è·Ÿé‡ç»˜çš„è¿‡ç¨‹ å¦‚æžœè¦å¯¹å…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œï¼ˆåˆ å‡ï¼Œæ·»åŠ å­èŠ‚ç‚¹ï¼‰ï¼Œåº”å°†æ­¤å…ƒç´ å…ˆç§»é™¤æˆ–cloneNodeï¼Œæ“ä½œå®Œæˆä¹‹åŽå†æ›¿æ¢åŽŸæ¥èŠ‚ç‚¹ ä½¿ç”¨innerHtmlä»£æ›¿é«˜é¢‘çš„appendChild æœ€ä¼˜çš„layoutæ–¹æ¡ˆ æ‰¹é‡è¯»ï¼Œä¸€æ¬¡æ€§å†™ã€‚æŠŠä»»ä½•å¯¼è‡´é‡ç»˜çš„æ“ä½œæ”¾å…¥requestAnimationFrame è™šæ‹ŸDOM å°†domæŠ½è±¡ä¸ºè™šæ‹Ÿdomï¼Œåœ¨domå˜åŒ–æ—¶å…ˆå¯¹è™šæ‹Ÿdomè¿›è¡Œæ“ä½œï¼Œé€šè¿‡dom diffå°†è™šæ‹Ÿdomå’ŒåŽŸè™šæ‹Ÿdomåšå¯¹æ¯”ï¼Œæœ€ç»ˆæ‰¹é‡ä¿®æ”¹çœŸå®ždomç»“æž„ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-11 17:50:35 "},"knowledge/":{"url":"knowledge/","title":"çŸ¥è¯†æ˜Ÿçƒ","keywords":"","body":"çŸ¥è¯†æ˜ŸçƒðŸŒ è¿™é‡Œè®°å½•äº†å„ç§çŸ¥è¯†åˆ†ç±» Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-06 19:41:25 "},"knowledge/react/":{"url":"knowledge/react/","title":"React","keywords":"","body":"React Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-20 10:51:30 "},"knowledge/react/theory/":{"url":"knowledge/react/theory/","title":"ReactåŽŸç†","keywords":"","body":"ReactåŽŸç† Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-20 10:55:49 "},"knowledge/react/theory/1/1.html":{"url":"knowledge/react/theory/1/1.html","title":"Reactä¸­setStateåŽå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ","keywords":"","body":" è§£ç­” è°ƒç”¨setStateä¹‹åŽï¼Œä¼šç»åŽ†ä¸€ä¸‹å‡ æ­¥ï¼š Reactä¼šå°†ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸Žç»„ä»¶å½“å‰çš„çŠ¶æ€åˆå¹¶ï¼Œç„¶åŽè§¦å‘æ‰€è°“çš„è°ƒå’Œè¿‡ç¨‹ ç»è¿‡è°ƒå’Œè¿‡ç¨‹ï¼ŒReactä¼šä»¥ç›¸å¯¹é«˜æ•ˆçš„æ–¹å¼æ ¹æ®æ–°çš„çŠ¶æ€æž„å»ºReactå…ƒç´ æ ‘å¹¶ä¸”ç€æ‰‹é‡æ–°æ¸²æŸ“æ•´ä¸ªUIç•Œé¢ åœ¨Reactå¾—åˆ°å…ƒç´ æ ‘ä¹‹åŽï¼ŒReactä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ–°çš„æ ‘ä¸Žè€æ ‘çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åŽæ ¹æ®å·®å¼‚å¯¹ç•Œé¢è¿›è¡Œæœ€å°åŒ–é‡æ¸²æŸ“ åœ¨å·®å¼‚è®¡ç®—ç®—æ³•ä¸­ï¼ŒReactèƒ½å¤Ÿç›¸å¯¹ç²¾ç¡®åœ°çŸ¥é“å“ªäº›ä½ç½®å‘ç”Ÿäº†æ”¹å˜ä»¥åŠåº”è¯¥å¦‚ä½•æ”¹å˜ï¼Œè¿™å°±ä¿è¯äº†æŒ‰éœ€æ›´æ–°ï¼Œè€Œä¸æ˜¯å…¨éƒ¨é‡æ–°æ¸²æŸ“ setStateä¸ºä»€ä¹ˆé»˜è®¤æ˜¯å¼‚æ­¥ å‡å¦‚æ‰€æœ‰setStateæ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€æ²¡æ‰§è¡Œä¸€æ¬¡setSTateæ—¶ï¼Œéƒ½é‡æ–°vnode diff + domä¿®æ”¹ï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯æžä¸ºä¸å¥½çš„ã€‚å¦‚æžœæ˜¯å¼‚æ­¥ï¼Œåˆ™å¯ä»¥æŠŠä¸€ä¸ªåŒæ­¥ä»£ç ä¸­çš„å¤šä¸ªsetStateåˆå¹¶æˆä¸€æ¬¡ç»„ä»¶æ›´æ–°ã€‚ setStateä»€ä¹ˆæ—¶å€™æ˜¯åŒæ­¥ setTimeout åŽŸç”Ÿäº‹ä»¶ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-20 11:17:01 "},"knowledge/react/theory/2/1.html":{"url":"knowledge/react/theory/2/1.html","title":"Reduxä¸­å¼‚æ­¥çš„è¯·æ±‚å¦‚ä½•å¤„ç†ï¼Ÿ","keywords":"","body":" è§£ç­” redux-thunk ç¬¬ä¸€æ­¥ï¼šé…ç½®redux-thunkï¼š import { createStore, applyMiddleware, compose } from 'redux' import thunk from 'redux-thunk' const enhancer = composeEnhancers(applymiddleware(thunk)) const store = createStore(reducer, enhancer) Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-20 15:56:26 "},"knowledge/react/theory/3/1.html":{"url":"knowledge/react/theory/3/1.html","title":"Reactç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ–¹å¼","keywords":"","body":" è§£ç­” 1. çˆ¶ç»„ä»¶å‘è‡ªç»„ä»¶é€šä¿¡ - å±žæ€§ä¼ é€’ 2. å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ - å±žæ€§æ–¹æ³•ä¼ é€’ 3. è·¨ç»„ä»¶é€šä¿¡ - å±žæ€§ä¼ é€’ï¼Œä¼ é€’å±‚çº§è¾ƒæ·±å¢žåŠ å¤æ‚åº¦ - ä½¿ç”¨context 4. æ²¡æœ‰åµŒå¥—å…³ç³»çš„ç»„ä»¶ - è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ï¼ˆå‘å¸ƒè®¢é˜…ï¼‰ - reduxç­‰å…¨å±€çŠ¶æ€ç®¡ç† - å…„å¼Ÿç»„ä»¶å¯ä»¥é€šä¿¡çˆ¶ç»„ä»¶é€šä¿¡ ä½¿ç”¨Contextè·¨ç»„ä»¶é€šä¿¡ const BatteryContext = createContext() { color => {} } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-07 11:17:24 "},"knowledge/react/theory/4/1.html":{"url":"knowledge/react/theory/4/1.html","title":"React.createElementä¸»è¦åšäº†ä»€ä¹ˆï¼Ÿ","keywords":"","body":" ä¸ºä»€ä¹ˆä½¿ç”¨jsxçš„æ–‡ä»¶éƒ½éœ€è¦import Reactï¼Ÿ å› ä¸ºjsxä¼šè¢«è§£æžä¸ºReact.createElementï¼ŒcreateElementæŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š typeï¼šdiv configï¼šèŠ‚ç‚¹å±žæ€§ï¼Œè¯¸å¦‚classNameï¼Œidï¼Œkeyï¼Œref children æ¥çœ‹ä¸€ä¸ªç®€å•çš„JSXè¢«babelä¹‹åŽï¼š this.ref = ref} key={1}> Hello World React.createElement('div', { className: '111', id: 'leo', ref: ref => this.ref = ref, key: 1 }, 'Hello World') å¦‚æžœHello Worldæ˜¯å¤šä¸ªå¤æ‚èŠ‚ç‚¹å‘¢ this.ref = ref} key={1}> Hello World1 Hello World2 React.createElement('div', { className: '111', id: 'leo', ref: ref => this.ref = ref, key: 1 }, React.createElement('div', null, 'Hello World1'), React.createElement('div', null, 'Hello World2'), ) ä»Žè¿™é‡Œçœ‹å‡ºcreateElementçš„ç¬¬ä¸‰ä¸ªå‚æ•°childrenå…¶å®žæ˜¯ä¸ªä¸å®šå‚æ•° createElementçš„ä¸»è¦æµç¨‹ ä»Žconfigä¸­èŽ·å–ä¿ç•™å­—æ®µkeyï¼Œrefï¼Œselfï¼Œ source é™¤äº†ä¿ç•™å­—æ®µï¼Œå…¶ä»–å±žæ€§ä»Žconfigèµ‹å€¼åˆ°propsã€‚tipsï¼špropsä¸ºä½•ç‰©ï¼Ÿconst props = {} å¤„ç†ä¸å®šå‚æ•°childrenï¼Œé€šè¿‡argumentsï¼Œèµ‹å€¼åˆ°props.children èŽ·å–type.defaultPropsï¼Œå½“props[propName]ä¸ºundefinedæ—¶è¿›è¡Œèµ‹å€¼ type.defaultPropsæ˜¯ä»€ä¹ˆï¼Ÿ æ™®é€šèŠ‚ç‚¹æ˜¯æ²¡æœ‰defaultPropsçš„ï¼Œåªæœ‰ç»„ä»¶æ‰ä¼šæœ‰ï¼Œå¦‚ä¸‹ï¼š class App extends React.Component { render () { return Hello World } } App.defaultProps = { name: 'leo' } createElementåŠŸèƒ½ createElementå…¶å®žå°±æ˜¯ä¸ªåˆ›å»ºvirtual Domçš„å‡½æ•°Virtual Domçš„ç»“æž„æ˜¯æ€Žæ ·çš„ï¼Ÿ { $$typeof: 0xeac7, type: 'div' æˆ–è€… Appï¼Œ key: '1', ref: ref => this.ref = ref, props: { className: '111', id: 'leo', name: 'leo', children: [ { $$typeof: 0xeac7, type: 'div', props: { children: ['Hello World'] } } ] } } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-12 11:37:19 "},"knowledge/react/theory/5/1.html":{"url":"knowledge/react/theory/5/1.html","title":"React Component","keywords":"","body":" Reactä¸­PureComponentçš„å®žçŽ°ï¼š // ä»¥ä¸‹åšçš„éƒ½æ˜¯ç»§æ‰¿åŠŸèƒ½ï¼Œè®© PureComponent ç»§æ‰¿è‡ª Component function ComponentDummy() {} ComponentDummy.prototype = Component.prototype; function PureComponent(props, context, updater) { this.props = props; this.context = context; this.refs = emptyObject; this.updater = updater || ReactNoopUpdateQueue; } const pureComponentPrototype = (PureComponent.prototype = new ComponentDummy()); pureComponentPrototype.constructor = PureComponent; Object.assign(pureComponentPrototype, Component.prototype); // é€šè¿‡è¿™ä¸ªå˜é‡åŒºåˆ«ä¸‹æ™®é€šçš„ Component pureComponentPrototype.isPureReactComponent = true; Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-12 14:00:33 "},"knowledge/react/theory/6/1.html":{"url":"knowledge/react/theory/6/1.html","title":"React Refçš„å®žçŽ°åŽŸç†","keywords":"","body":" refçš„ä¸‰ç§ç”¨æ³• stringæ¨¡å¼çš„å·²è¢«åºŸå¼ƒ 1. å›žè°ƒå‡½æ•°æ¨¡å¼ ref = { el => this.el = el } 2. createRef this.ref = React.createRef() ref = {this.ref} 3. forwardRef React.forwardRef((props, ref) => ( )) createRef function createRef () { const refObject = { current: null } return refObject } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-12 14:08:59 "},"knowledge/react/theory/7/1.html":{"url":"knowledge/react/theory/7/1.html","title":"React Childrençš„å®žçŽ°ç»†èŠ‚","keywords":"","body":" React.Children.mapçš„ä¸»è¦åŠŸèƒ½ ä¸‰ä¸ªå‚æ•°ï¼šchildrenï¼Œfuncï¼Œcontext ä¸»è¦åŠŸèƒ½ï¼šä½¿ç”¨ä¸Šä¸‹æ–‡contextå¯¹æ¯ä¸ªchildrenæ‰§è¡Œfunc è¿”å›žç»“æžœçš„ç‰¹æ®Šå¤„ç†ï¼Œè¿”å›žç»“æžœæ˜¯æ•°ç»„ï¼Œæ‹å¹³ å¦‚ä½•æ‹å¹³ï¼ŸéåŽ†æ¯ä¸€é¡¹æ‰§è¡ŒmapIntoWithKeyPrefixInterval ä¸¤ä¸ªé—®é¢˜ React.Children.mapçš„ç¬¬ä¸€ä¸ªå‚æ•°childrenå…è®¸å“ªå‡ ç§ç±»åž‹ï¼Ÿ ä¸ºä»€ä¹ˆæ‰§è¡Œå®Œå›žè°ƒçš„ç»“æžœmappedChildï¼Œåˆ¤æ–­æ˜¯è¿˜è¦è¿›è¡ŒmapIntoWithKeyPrefixInternal è§£ç­” React.Children.map å°±æ˜¯ReacChildren.jsä¸­çš„mapChildrenå‡½æ•°ï¼Œä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š mapChildrenå‡½æ•°ï¼š 1. å®šä¹‰resultï¼Œconst result = [] 2. mapIntoKeyPrefixInternal(children, result, null, func, context) 3. è¿”å›žresult mapIntoKeyPrefixInternalå‡½æ•°ï¼š 1. ç”Ÿæˆcontextï¼šgetPooledTraverseContext { result: [], keyprefix: '', func: func, context: null, count: 0 } 2. traverseAllChildrenImpl éåŽ†childrenæ‰§è¡Œfunc 3. é‡Šæ”¾contextï¼šreleaseTraverseContext 3.1 æŠŠcontextä¸‹çš„å±žæ€§éƒ½ç½®ä¸ºnullï¼Œcountç½®ä¸º0 3.2 æŠŠcontextæ”¾å…¥traverseContextPoolï¼Œä¸Šä¸‹æ–‡æ± sizeä¸º10 traverseAllChildrenImplå‡½æ•°ï¼š 1. childrenä¸ºstringï¼Œnumberæ—¶ï¼šè¡¨ç¤ºæ˜¯æ–‡æœ¬èŠ‚ç‚¹ 2. childrenä¸ºobjectç±»åž‹ï¼Œchildren.$$typeofä¸ºREACT_ELEMENT_TYPEï¼ŒREACT_PORTAL_TYPEï¼Œè¯´æ˜Žæ˜¯å¯ä»¥æ¸²æŸ“çš„èŠ‚ç‚¹ 3. ä»¥ä¸Šå››ç§æƒ…å†µè¯æ˜Žchildrenæ˜¯å¯æ¸²æŸ“çš„èŠ‚ç‚¹ï¼Œç›´æŽ¥æ‰§è¡ŒmapSingleChildIntoContext 4. childrenæ˜¯æ•°ç»„ï¼ŒéåŽ†childrenï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ¥ä¸€æ¬¡traverseAllChildrenImpl 5. childrenæ˜¯å¯è¿­ä»£æ•°æ®ï¼Œè°ƒç”¨Symbol.iteratorï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ¥ä¸€æ¬¡traverseAllChildrenImpl 6. childrenæ˜¯objectï¼Œæ”¾å¼ƒï¼Œéžæ³•æ•°æ®è­¦å‘Š mapSingleChildIntoContextå‡½æ•°ï¼š 1. èŽ·å–æ•°æ®ï¼šconst { result, keyPrefix, func, context } = bookKeeping 2. æ‰§è¡Œå›žè°ƒï¼šlet mappedChild = func.call(context, child, bookKeeping.count++) 3. åˆ¤æ–­ç»“æžœmappedChildæ˜¯æ•°ç»„ï¼Œä»ŽmapIntoKeyPrefixInternalå¯¹æ¯ä¸€é¡¹å†èµ°ä¸€é 4. mappedChildä¸æ˜¯æ•°ç»„ï¼Œresult.push(mappedChild) ä¸ºä»€ä¹ˆåœ¨æ‰§è¡Œå®Œfuncå›žè°ƒæ‹¿åˆ°mappedChildï¼Œè¿˜è¦å¯¹å…¶å¤„ç† å› ä¸ºReactéœ€è¦å¯¹å…¶è¿›è¡Œæ‹å¹³ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§åœºæ™¯ï¼š React.Children.map(this.props.children, child => [child, child]) è¿™ç§æƒ…å†µå¦‚æžœChildrenæ˜¯[div1, div2]ï¼Œmapä¹‹åŽçš„ç»“æžœä¸º[div1, div1, div2, div2] æ€§èƒ½ä¼˜åŒ–ç‚¹ const POOL_SIZE = 10; const traverseContextPool = []; function getPooledTraverseContext( mapResult, keyPrefix, mapFunction, mapContext, ) { if (traverseContextPool.length) { const traverseContext = traverseContextPool.pop(); traverseContext.result = mapResult; traverseContext.keyPrefix = keyPrefix; traverseContext.func = mapFunction; traverseContext.context = mapContext; traverseContext.count = 0; return traverseContext; } else { return { result: mapResult, keyPrefix: keyPrefix, func: mapFunction, context: mapContext, count: 0, }; } } function releaseTraverseContext(traverseContext) { traverseContext.result = null; traverseContext.keyPrefix = null; traverseContext.func = null; traverseContext.context = null; traverseContext.count = 0; if (traverseContextPool.length æžä¸€ä¸ªtraverseContextPoolæ± å­ï¼Œå­˜å‚¨traverseContextå¯¹è±¡ï¼Œå°±ä¸ç”¨é¢‘ç¹åˆ›å»ºä¸€ä¸ªæœ‰å¾ˆå¤šå±žæ€§çš„å¯¹è±¡ï¼Œå¾ˆæ¶ˆè€—æ€§èƒ½ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-13 10:50:19 "},"knowledge/react/theory/8/1.html":{"url":"knowledge/react/theory/8/1.html","title":"React Fiber","keywords":"","body":" Fiberå‡ºçŽ°çš„èƒŒæ™¯ Stack reconcilerçš„å·¥ä½œæµç¨‹å¾ˆåƒå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ã€‚ çˆ¶ç»„ä»¶é‡Œè°ƒç”¨å­ç»„ä»¶ï¼Œå¯ä»¥ç±»æ¯”ä¸ºå‡½æ•°çš„å‡ºé€’å½’ å¯¹äºŽç‰¹åˆ«åºžå¤§çš„vDOMæ ‘æ¥è¯´ï¼Œreconcilerè¿‡ç¨‹ä¼šå¾ˆé•¿ï¼Œè¶…è¿‡16ms reconcileræœŸé—´ï¼Œä¸»çº¿ç¨‹æ˜¯è¢«jså ç”¨çš„ï¼Œå› ä¸ºä»»ä½•äº¤äº’ï¼Œå¸ƒå±€ï¼Œæ¸²æŸ“éƒ½ä¼šåœæ­¢ï¼Œç»™ç”¨æˆ·å¡äº†çš„æ„Ÿè§‰ Reactåœ¨è¿›è¡Œç»„ä»¶æ¸²æŸ“æ—¶ï¼Œä»ŽsetStateåˆ°æ¸²æŸ“å®Œæˆæ•´ä¸ªè¿‡ç¨‹æ˜¯åŒæ­¥çš„ å¦‚æžœæ¸²æŸ“çš„ç»„ä»¶æ¯”è¾ƒå¤§ï¼Œjsæ‰§è¡Œä¼šå æ®ä¸»çº¿ç¨‹äº‹ä»¶æ¯”è¾ƒé•¿ï¼Œå¯¼è‡´reactåœ¨åŠ¨ç”»ï¼Œæ‰‹åŠ¿ç­‰åº”ç”¨ä¸­æ•ˆæžœæ¯”è¾ƒå·® Fiberå®žçŽ°åŽŸç† å®žçŽ°è‡ªå·±çš„ç»„ä»¶è°ƒç”¨æ ˆï¼Œä»¥é“¾è¡¨çš„å½¢å¼éåŽ†ç»„ä»¶æ ‘ï¼Œå¯ä»¥çµæ´»çš„æš‚åœï¼Œç»§ç»­å’Œä¸¢å¼ƒæ‰§è¡Œçš„ä»»åŠ¡ã€‚ Fiberå…¶å®žæ˜¯ä¸€ç§æ•°æ®ç»“æž„ï¼š const fiber = { stateNode, child, sibling, return, } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-13 17:38:44 "},"knowledge/react/theory/9/1.html":{"url":"knowledge/react/theory/9/1.html","title":"Reactå¦‚ä½•è‡ªå®šä¹‰å®žçŽ°requestIdleCallback","keywords":"","body":" ä¸ºä»€ä¹ˆReactæ”¾å¼ƒä½¿ç”¨åŽŸç”ŸrequestIdleCallback? äº†è§£å‡ ä¸ªåç§°ï¼šFPSï¼šframe per secondï¼Œæ¯ç§’çš„å¸§æ•° å¸§çš„å‡ ä¸ªé—®é¢˜ setTimeout(callback) å’Œ setInterval(callback) å®žçŽ°åŽŸç† reactä½¿ç”¨requestAnimationFrame + MessageChannel å®žçŽ°requestIdleCallbackçš„polyfillç‰ˆæœ¬ï¼š let frameDeadline let activeFrameTime = 16 let channel = new MessageChannel() let port = channel.port2 channel.port1.onmessage = () => { const currentTime = performance.now() console.log('å½“å‰æ—¶é—´:', currentTime) console.log('å½“å‰å¸§å‰©ä½™æ—¶é—´:', frameDeadline - currentTime) } const startTime = performance.now() const requestAnimationFrameCircle = () => { requestAnimationFrame(timestamp => { frameDeadline = timestamp + activeFrameTime port.postMessage(undefined) if (performance.now() - startTime Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-31 20:22:13 "},"knowledge/react/theory/10/1.html":{"url":"knowledge/react/theory/10/1.html","title":"hookså®žçŽ°åŽŸç†","keywords":"","body":"Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 11:02:17 "},"knowledge/react/theory/10/":{"url":"knowledge/react/theory/10/","title":"hookså®žçŽ°åŽŸç†","keywords":"","body":"hooks åŽŸç† Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 11:02:45 "},"knowledge/react/theory/10/1/1.html":{"url":"knowledge/react/theory/10/1/1.html","title":"useStateå®žçŽ°","keywords":"","body":"useStateå®žçŽ° useStateçš„ä½¿ç”¨ function App () { const [count, setCount] = React.useState(0); return {count} setCount(count + 1)}>å¢žåŠ  } useStateè‡ªå®šä¹‰å®žçŽ° let hookStates = [] let hookIndex = 0 function useState (initialState) { hookStates[hookIndex] = hookStates[hookIndex] || initialState const currentIndex = hookIndex function setState (newState) { hookStates[currentIndex] = newState render() } return [hookStates[hookIndex++], setState] } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 15:36:19 "},"knowledge/react/theory/10/2/1.html":{"url":"knowledge/react/theory/10/2/1.html","title":"useMemoå®žçŽ°","keywords":"","body":"useMemoçš„å®žçŽ° useMemoçš„ä½œç”¨ï¼šæ ¹æ®ä¾èµ–é¡¹è¿”å›žä¸€ä¸ªè®°å¿†å€¼ï¼Œåªæœ‰ä¾èµ–é¡¹æ”¹å˜æ‰ä¼šè§¦å‘useMemoå›žè°ƒuseMemoçš„ä½¿ç”¨ function App () { const [count, setCount] = React.useState(0) const [name, setName] = React.useState('xuqiang') const memoized = React.useMemo(() => { console.log('get memoized value') return name + count }, [name, count]); return setName(e.target.value)} /> setCount(count + 1)}>å¢žåŠ  } useMemoçš„å®žçŽ°ï¼š function useMemo (callback, dependencies) { if (hookStates[hookIndex]) { const [memoizedVal, oldDependencies] = hookStates[hookIndex] const isDependencySame = dependencies.every((dependency, idx) => dependency === oldDependencies[idx]) if (isDependencySame) { hookIndex++ return memoizedVal } else { const memoizedVal = callback() hookStates[hookIndex++] = [memoizedVal, dependencies] return memoizedVal } } else { const memoizedVal = callback() hookStates[hookIndex++] = [memoizedVal, dependencies] return memoizedVal } } è¿™é‡Œä¼šæœ‰ä¸ªé—®é¢˜æ˜¯ï¼šhookIndexè‡ªå¢žä¹‹åŽï¼Œæ¯æ¬¡hookStates[hookIndex]åº”è¯¥éƒ½æ˜¯undefinedè¿™é‡Œæ˜¯ä¸ªè¯¯åŒºï¼šuseMemoåªä¼šè¿›ä¸€æ¬¡ï¼ŒhookStateså’ŒhookIndexåªæ˜¯ä¿å­˜äº†å½“å‰ç»„ä»¶ä¸­çš„å„ä¸ªhookï¼Œå¦‚æžœç‚¹å‡»ç­‰å¯¼è‡´ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“ï¼Œé‚£ä¹ˆå¾—ä¿è¯hookIndexè¢«é‡ç½® Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 17:14:18 "},"knowledge/react/theory/10/3/1.html":{"url":"knowledge/react/theory/10/3/1.html","title":"useCallbackå®žçŽ°","keywords":"","body":"useCallbackå®žçŽ° useCallbackçš„ä½¿ç”¨ï¼šå‡½æ•°å¥æŸ„çš„æ”¹å˜ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ŒuseCallbackå¯ä»¥ä½¿å¥æŸ„ä¿æŒä¸å˜ï¼Œç»“åˆReact.memoå¯ä»¥é¿å…è‡ªç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ function Child (props) { console.log('Child init') return Submit } Child = React.memo(Child) function App () { const [count, setCount] = React.useState(0) const [name, setName] = React.useState('xuqiang') const onButtonClick = React.useCallback(() => { console.log('callback is executed') }, [name]) return setName(e.target.value)} /> setCount(count + 1)}>å¢žåŠ  } useCallbackè‡ªå®šä¹‰å®žçŽ° function useCallback (callback, dependencies) { if (hookStates[hookIndex]) { const [oldCallback, oldDependencies] = hookStates[hookIndex] const isDependencySame = dependencies.every((dependency, idx) => dependency === oldDependencies[idx]) if (isDependencySame) { hookIndex++ return oldCallback } else { hookStates[hookIndex++] = [callback, dependencies] return callback } } else { hookStates[hookIndex++] = [callback, dependencies] return callback } } useCallbackçš„å®žçŽ°å’ŒuseMemoçš„å®žçŽ°å·®ä¸å¤š Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 17:17:17 "},"knowledge/react/theory/10/4/1.html":{"url":"knowledge/react/theory/10/4/1.html","title":"useEffectå®žçŽ°","keywords":"","body":"useEffectå®žçŽ° useEffectçš„ä½¿ç”¨ function App () { const [count, setCount] = React.useState(0) const [name, setName] = React.useState('xuqiang') React.useEffect(() => { console.log('effect executed') }, [name, count]) return setName(e.target.value)} /> setCount(count + 1)}>å¢žåŠ  } useEffectçš„æ‰§è¡Œæ—¶æœºï¼š componentDidMount componentDidUpdate useEffectçš„å®žçŽ°ï¼š function useEffect (callback, dependencies) { if (hookStates[hookIndex]) { const oldDependencies = hookStates[hookIndex] const isDependencySame = dependencies.every((dependency, idx) => dependency === oldDependencies[idx]) if (isDependencySame) { hookIndex++ } else { hookStates[hookIndex++] = dependencies callback() } } else { hookStates[hookIndex++] = dependencies callback() } } useEffectçš„å®žçŽ°è·ŸuseMemoå¾ˆç›¸ä¼¼ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 17:33:06 "},"knowledge/react/theory/10/5/1.html":{"url":"knowledge/react/theory/10/5/1.html","title":"React.memoçš„å®žçŽ°","keywords":"","body":"React.memoçš„å®žçŽ° React.memoçš„ä½œç”¨ï¼špropsæ”¹å˜äº†è§¦å‘æ¸²æŸ“ï¼Œpropsæœªå˜ï¼Œå­ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“ React.memo = innerComponent => { return class extends React.PureComponent { render () { return } } } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 17:39:05 "},"knowledge/react/theory/10/6/1.html":{"url":"knowledge/react/theory/10/6/1.html","title":"useContextå®žçŽ°","keywords":"","body":"useContextå®žçŽ° useContextçš„ä½¿ç”¨ï¼šéžç›´æŽ¥ç»„ä»¶æ•°æ®ä¼ è¾“ const Context = React.createContext() function Child () { const context = React.useContext(Context) return {context.name} } function App () { const [count, setCount] = React.useState(0) const [name, setName] = React.useState('xuqiang') return setName(e.target.value)} /> setCount(count + 1)}>å¢žåŠ  } useContextçš„å®žçŽ°ï¼š function useContext (Context) { return Context._currentValue } React.createContextè¿”å›žçš„Contextçš„ç»“æž„ï¼š $$typeof: Symbol(react.context), _currentValue: undefined Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-14 17:48:31 "}}