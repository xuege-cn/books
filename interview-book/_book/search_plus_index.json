{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-03 16:08:07 "},"knowledge/":{"url":"knowledge/","title":"çŸ¥è¯†æ˜Ÿçƒ","keywords":"","body":"çŸ¥è¯†æ˜ŸçƒðŸŒ è¿™é‡Œè®°å½•äº†å„ç§çŸ¥è¯†åˆ†ç±» Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-06 19:41:25 "},"knowledge/browser/":{"url":"knowledge/browser/","title":"Browser","keywords":"","body":"browser Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-22 14:18:37 "},"knowledge/browser/1/1.html":{"url":"knowledge/browser/1/1.html","title":"æ¸²æŸ“æ€§èƒ½","keywords":"","body":"æ¸²æŸ“æ€§èƒ½ é—®é¢˜ï¼š å¸§çš„æ¦‚å¿µ çŽ°åœ¨å¹¿æ³›ä½¿ç”¨çš„å±å¹•éƒ½æœ‰å›ºå®šçš„åˆ·æ–°çŽ‡ï¼ˆæœ€æ–°çš„ä¸€èˆ¬åœ¨60Hzï¼‰ï¼Œåœ¨ä¸¤æ¬¡ç¡¬ä»¶åˆ·æ–°ä¹‹é—´æµè§ˆå™¨è¿›è¡Œä¸¤æ¬¡é‡ç»˜æ˜¯æ²¡æœ‰æ„ä¹‰çš„åªä¼šæ¶ˆè€—æ€§èƒ½ æ¸²æŸ“å¸§ æŒ‡æµè§ˆå™¨ä¸€æ¬¡å®Œæ•´ç»˜åˆ¶è¿‡ç¨‹ å¸§ä¹‹é—´çš„æ—¶é—´é—´éš”æ˜¯DOMè§†å›¾æ›´æ–°çš„æœ€å°é—´éš” æ˜¯å¦æ„å‘³ç€DOMè§†å›¾æ›´æ–°æœ€å°æ—¶é—´ä¸º16ms ä¸»æµæµè§ˆå™¨å±å¹•åˆ·æ–°çŽ‡ä¸º60Hzï¼Œæ¸²æŸ“ä¸€å¸§çš„æ—¶é—´å¿…é¡»æŽ§åˆ¶åœ¨16msä¹‹å†…æ‰èƒ½ä¿è¯ä¸æŽ‰å¸§ æµè§ˆå™¨æ‰§è¡Œä¸€æ¬¡æ¸²æŸ“ä¸»è¦æ˜¯åšå‡ ä»¶äº‹ï¼Œå¦‚ä¸‹å›¾ æµè§ˆå™¨æ¯å¸§å¤„ç†æµç¨‹ï¼š input event handlers: å¤„ç†äº‹ä»¶å›žè°ƒï¼Œæ¯”å¦‚scrollç­‰ requestAnimationFrame: å›žè°ƒå‡½æ•°åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œ Parse HTML: ç”ŸæˆDOM tree Recalc Styles: çº§è”åœ°ç”Ÿæˆæ¯ä¸ªèŠ‚ç‚¹åœ°ç”Ÿæ•ˆæ ·å¼ Layout: æ•´åˆDOM treeå’Œstyle treeï¼Œç”Ÿæˆlayout tree Update Layer tree: è§£æžå±‚å ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆlayer tree Paint: å„å±‚åˆ†åˆ«è¿›è¡Œç»˜åˆ¶ Composite: åˆæˆå„å±‚çš„æ¸²æŸ“ç»“æžœ æŽ‰å¸§çš„æ¦‚å¿µ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-22 11:57:42 "},"knowledge/browser/2/1.html":{"url":"knowledge/browser/2/1.html","title":"cookie","keywords":"","body":"cookie ä¸ºä»€ä¹ˆéœ€è¦cookie httpæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯ï¼ŒæœåŠ¡å™¨éƒ½ä¸çŸ¥é“ç”¨æˆ·æ˜¯è°ï¼Œæ˜¯å¦ç™»é™†è¿‡ cookieçš„æž„æˆ author=leo; é”®å€¼å¯¹ expires=Fri, 31 Dec 9999 23:59:59 GMT; å¤±æ•ˆæ—¶é—´ path=/; æŽ§åˆ¶ç›¸å¯¹è·¯å¾„ä¸‹å¯ä»¥è®¿é—® domain=.foo.com\"; æŽ§åˆ¶ç›¸å¯¹åŸŸåå¯ä»¥è®¿é—® httpOnly=true; æ˜¯å¦åªç”¨äºŽæœåŠ¡ç«¯ä¼ è¾“ï¼Œdocument.cookieä¸å¯å– Secure=true; è¡¨ç¤ºåªä¼šå‘é€ç»™httpsçš„ä¸»æœº SameSite=true; é™åˆ¶è·¨ç«™æºå¸¦cookie cookieçš„å®‰å…¨éšæ‚£ cookieæ˜¯å¯ä»¥è¢«ç¯¡æ”¹çš„ï¼Œcurlï¼Œnodejsç­‰éƒ½å¯ä»¥å‘èµ·httpè¯·æ±‚ï¼Œå¯ä»¥è®¾ç½®ä»»ä½•å¤´å­—æ®µï¼Œå®¹æ˜“è¢«å…¶æ¬ºéª— cookieçš„å¼Šç«¯ æµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦cookieæ•°æ®ï¼Œä¼šåˆ°æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ Cookieæ˜Žæ–‡ä¼ è¾“ï¼Œå®‰å…¨æ€§æˆé—®é¢˜ Cookieå¤§å°é™åˆ¶åœ¨4KBå·¦å³ï¼Œå¤æ‚çš„å­˜å‚¨éœ€æ±‚ä¸å¤Ÿç”¨ Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-07-22 22:03:55 "},"knowledge/browser/3/1.html":{"url":"knowledge/browser/3/1.html","title":"DOMContentLoadedå…¨é¢è§£æž","keywords":"","body":" DOMContentLoaded åˆå§‹HTMLæ–‡æ¡£è¢«å®Œå…¨åŠ è½½å’Œè§£æžå®Œæˆä¹‹åŽï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘ ä»€ä¹ˆæ—¶å€™ç®—æ˜¯æ–‡æ¡£åŠ è½½å®Œï¼Ÿ åŒæ­¥javascriptä¼šæš‚åœDOMçš„è§£æž document.addEventListener('DOMContentLoaded', function () { console.log('DOMContentLoaded:', (Date.now() - domStart)) }) const start = Date.now() while (true) { const end = Date.now() if (end - start > 5000) { break } } console.log('script loaded!') å¯ä»¥å‘çŽ°å½“æ—¶é—´æ˜¯5000æ—¶ï¼ŒDOMContentLoadedçš„æ—¶é—´ä¸º5048ï¼Œè€Œwhileçš„æ—¶é—´ä¸º1000æ—¶ï¼ŒDOMContentLoadedçš„æ—¶é—´ä¸º1048æ‰€ä»¥ï¼šåŒæ­¥çš„JSæ–‡æ¡£é˜»å¡žäº†DOMçš„è§£æž async å’Œ deferå¯¹äºŽDOMContentLoadedçš„å½±å“ document.addEventListener('DOMContentLoaded', function () { console.log('DOMContentLoaded:', (Date.now() - domStart)) }) const start = Date.now() while (true) { const end = Date.now() if (end - start > 5000) { break } } console.log('script loaded!') å‡ºçŽ°äº†ä¸¤ç§ä¸åŒæƒ…å†µï¼š async asyncæ˜¯å¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½å®Œæˆä¾¿æ‰§è¡Œ document.addEventListener('DOMContentLoaded', ...)åœ¨å‰é¢ï¼ŒDOMContentLoaded é©¬ä¸Šæ‰§è¡Œ åœ¨å‰é¢ï¼Œå°±çœ‹jsçš„ä¸‹è½½é€Ÿåº¦äº†ï¼Œåœ¨æ‰§è¡ŒDOMContentLoadedä¹‹å‰ä¸‹è½½å®Œæˆï¼ŒDOMContentLoadedçš„æ—¶é—´å°±æ˜¯5048 defer è¯¥å±žæ€§ç”¨æ¥é€šçŸ¥æµè§ˆå™¨è¯¥è„šæœ¬å°†åœ¨æ–‡æ¡£å®Œæˆè§£æžåŽï¼Œè§¦å‘DOMContentLoadedäº‹ä»¶å‰æ‰§è¡Œ æ‰€ä»¥è¿™é‡ŒDOMContentLoadedæ—¶é—´æ˜¯5048 readyState readyStateæ˜¯ä¸€ä¸ªåªè¯»å±žæ€§readyStateçš„ä¸‰ç§çŠ¶æ€ï¼š loading interactive complete readyStateæ”¹å˜çš„äº‹ä»¶ï¼šdocument.onreadystatechange readyStateè·ŸDOMContentLoadedçš„å…³è” DOMContentLoadedäº‹ä»¶å¿…é¡»æ˜¯åœ¨document.readyStateä¸ºloadingæ—¶ç»‘å®šæ‰æœ‰æ•ˆ const script = document.createElement('script') script.src=\"./test.js\" document.body.appendChild(script) console.log('test.js load') document.addEventListener('DOMContentLoaded', function () { console.log('DOMContentLoaded') }) è¿™ä¸ªðŸŒ° å¯ä»¥çœ‹åˆ°ï¼šDOMContentLoadedäº‹ä»¶æœªè¢«æ‰§è¡Œ readyStateå’ŒDOMContentLoadedæ‰§è¡Œé¡ºåºï¼š readyState: loading â†“ readyState: interctive â†“ DOMContentLoadedäº‹ä»¶ â†“ readyState: complete â†“ loadäº‹ä»¶ jsä»£ç æ”¾åœ¨æ–‡æ¡£æœ€åŽ æ­¤æ—¶jsæ˜¯ä¸éœ€è¦åƒä¸‹é¢è¿™æ ·å†™çš„ $(document).ready(function() { // å°‘å¹´çš„ä½ ï¼Œä»£ç å†™åœ¨è¿™é‡Œ... }); å…¶å®žjsåœ¨æ–‡æ¡£æœ€åŽï¼Œæ–‡æ¡£å·²ç»è§£æžå¥½äº†ï¼Œæ‰€ä»¥åªéœ€è¦åƒä¸‹é¢è¿™æ ·å†™å°±è¡Œäº†ï¼š (function() { // è¿™é‡Œä»£ç ... })(); ä¼˜ç‚¹æ˜¯ï¼šæ‰§è¡Œæ—¶æœºæ›´å¿« readyStateçŽ°åœ¨è¿˜æœ‰å•¥é”¤å­ç”¨ï¼Ÿ åˆ¤æ–­æ—¶æœºä¸ºloadingï¼Œç»‘å®šDOMContentLoadedäº‹ä»¶ if (document.readyState != 'loading') { init(); } else { window.addEventListener(\"DOMContentLoaded\", function () { init(); }); } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-08-31 16:47:34 "},"knowledge/browser/4/1.html":{"url":"knowledge/browser/4/1.html","title":"webé€šä¿¡","keywords":"","body":" webé€šä¿¡æ–¹å¼ è·¨æ–‡æ¡£é€šä¿¡ï¼šwindow.postMessage é€šé“é€šä¿¡ï¼šMessageChannel postMessageè·¨æ–‡æ¡£é€šä¿¡ ä¸‰ä¸ªå‚æ•°ï¼š messageï¼šå°†è¦å‘é€çš„æ•°æ® targetOriginï¼šç›®æ ‡æº transferï¼šTransferå¯¹è±¡ï¼ˆArrayBuffer ï½œ MessagePort ï½œ ImageBitmapï¼‰ // çˆ¶html // 1.html document.forms.addEventListener('submit', () => { const message = document.querySeletor('input[type=\"text\"]').value window.parent.frames[1].postMessage(message) }) window.addEventListener('message', msg => { alert('æŽ¥æ”¶åˆ°æ¶ˆæ¯ï¼š' + msg.data) }) otherWindow.postMessage(message, targetOrigin, [transfer]) otherWindowï¼š iframeçš„contentWindowå±žæ€§ window.openè¿”å›žçš„çª—å£å¯¹è±¡ window.frames targetOrigin: åŒæºï¼ˆåè®®ï¼ŒåŸŸåï¼Œç«¯å£ï¼‰æˆ–è€… * è·¨æ–‡æ¡£é€šä¿¡ + é€šé“é€šä¿¡ é€šè¿‡postMessageæ¥ä¼ è¾“channel.port // 1.html const mc = new MessageChannel() mc.port2.onmessage = data => { console.log('channel resceive message: ', data) } window.parent.postMessage('æ¥è‡ª1.htmlçš„æ¶ˆæ¯', '*', [mc.port1]) // test.html window.onmessage = msg => { window.frames[1].postMessage('æ¥è‡ªtest.htmlçš„æ¶ˆæ¯', '*', msg.ports) } // 2.html window.onmessage = msg => { msg.ports[0].postMessage('hello from 2.html') } Copyright Â© qiangxu@clubfactory.com 2020 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2020-09-01 17:32:33 "}}