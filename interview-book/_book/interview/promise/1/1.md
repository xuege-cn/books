
![é¢˜ç›®](1.jpeg)


### è§£ç­”

å¯ä»¥ä½¿ç”¨æ–°api -> allSettledè§£å†³ï¼Œæœ‰è¯·æ±‚å‡ºé”™ä»ä¼šè¿›å…¥.thenï¼Œç»“æžœæ ¼å¼å¦‚ä¸‹ðŸ‘‡ï¼š   
```
[
  { statue: 'fullfilled', value: 1 },
  { statue: 'fullfilled', value: 2 },
  { statue: 'rejected', value: 3 },
]
```   

åƒvscoderæ’ä»¶Code Runneré‡Œé¢è·‘Promiseï¼Œæ˜¯æ²¡æœ‰allSettledæ–¹æ³•çš„ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå·±å®žçŽ°ä¸€ä¸ªðŸ‘‡ï¼š   
```
if (!Promise.allSettled) {
  Promise.allSettled = promises => {
    let _promises = []
    for (let promise of promises) {
      _promises.push(promise.then(value => {
        return Promise.resolve({ status: 'fullfilled', value })
      }).catch(value => {
        return Promise.resolve({ status: 'rejected', value })
      }))
    }
    return Promise.all(_promises)
  }
}
Promise.allSettled([
  new Promise(resolve => {
    setTimeout(() => resolve(1), 1000)
  }),
  new Promise(resolve => {
    setTimeout(() => resolve(2), 2000)
  }),
  new Promise((resolve, reject) => {
    setTimeout(() => reject(3), 3000)
  })
]).then(res => {
  console.log('ç»“æžœï¼š', res)
}).catch(e => {
  console.log('å¼‚å¸¸ï¼š', e)
})
```