
![](1.jpeg)

#### è§£ç­”
- 1.webpackç”Ÿäº§æ¨¡å¼ä¸‹é»˜è®¤å¼€å¯tree-shaking
- 2.ç”±äºbabelæŠŠclassç­‰å°è£…æˆIIFEï¼Œå­˜åœ¨å‰¯ä½œç”¨å¯¼è‡´tree-shakingå¤±æ•ˆ
- 3.æ‰‹åŠ¨è®¾ç½®æ— å‰¯ä½œç”¨ï¼š
  - 3.1moduleä¸‹çš„rule.sideEffects: false
  - 3.2package.jsonä¸‹çš„sideEffects: false
- 4.ä¾èµ–äºes6 importçš„é™æ€åˆ†æï¼Œå‡½æ•°å¯ä»¥è¢«shaking   
- 5.tree shakingçš„è¿‡ç¨‹å‘ç”Ÿåœ¨å‹ç¼©é˜¶æ®µ
  - webpackç”±äºuglifyçš„ç¼˜æ•…ï¼Œå¯¼è‡´babelå®½æ¾æ¨¡å¼ä¸‹çš„classä¹Ÿæ— æ³•è¢«shaking
  - uglifyå¯ä»¥è®¾ç½®pure_gettersæ¥é¿å…è·å–å¯¹è±¡å±æ€§çš„å‰¯ä½œç”¨

**å‰¯ä½œç”¨ï¼š**   
1. ä¸€ä¸ªå‡½æ•°ä¼šï¼Œæˆ–è€…å¯èƒ½ä¼šå¯¹å‡½æ•°å¤–éƒ¨å˜é‡äº§ç”Ÿå½±å“çš„è¡Œä¸º   
2. è·å–å¯¹è±¡çš„å±æ€§ä¹Ÿä¼šäº§ç”Ÿå‰¯ä½œç”¨

#### babelç¼–è¯‘ä¸€ä¸ªclass
```
class Person {
  constructor(name){
    this.name = name;
  }
  getName () {
    return this.name
  }
}
```   

ç¼–è¯‘ä¹‹åğŸ‘‡ï¼š
```
var _createClass = function (constructor, protoProps) {
  for (let descriptor of protoProps) {
    descriptor.enumerable = descriptor.enumerable || !1
    descriptor.configurable = !0
    Object.defineProperty(constructor.prototype, descriptor.key, descriptor)
  }
}
var Person = function () {
  function Person (name) {
    this.name = name;
  }
  _createClass(Person, [{
    key: 'getName',
    value: function getName() {
      return this.name;
    }
  }]);
  return Person;
}()
```   

**babelä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œè¦ç”¨definePropertyæ¥èµ‹å±æ€§ï¼Œè€Œä¸æ˜¯å®šä¹‰ä¸€ä¸ªfunction Person, Person.prototype = { getName }ï¼š**   
å› ä¸ºES6çš„ã€ç±»å†…éƒ¨å£°æ˜çš„æ–¹æ³•ï¼Œæ˜¯ä¸å¯æšä¸¾çš„ï¼Œè€Œé€šè¿‡åŸå‹é“¾å£°æ˜çš„æ–¹æ³•æ˜¯å¯ä»¥æšä¸¾çš„ã€‘   

babelæœ‰ä¸€ç§å®½æ¾æ¨¡å¼ï¼š
```
{
  "presets": [["env", { "loose": false }]]
}
```   

å®½æ¾æ¨¡å¼ä¸‹classä¼šè¢«ç¼–è¯‘ä¸ºåŸå‹é“¾çš„æ–¹å¼ï¼Œè¿™æ—¶ç”¨rollupæ‰“åŒ…classå¯ä»¥è¢«shakingæ‰


#### tree-shakingçš„æœ€ä½³å®è·µ
1. å°†æ¯ä¸€ä¸ªç»„ä»¶æˆ–è€…åŠŸèƒ½å‡½æ•°ï¼Œéƒ½æ‰“åŒ…æˆå•ç‹¬çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œæ¯”å¦‚Buttonå•ç‹¬æ‰“åŒ…ï¼Œå•ç‹¬å¯¼å‡ºï¼šbabel-import-plugin
2. å°½é‡ä¸è¦å†™å¸¦æœ‰å‰¯ä½œç”¨çš„ä»£ç ï¼Œæ¯”å¦‚ç¼–å†™äº†IIFEï¼Œå‡½æ•°é‡Œåˆä½¿ç”¨äº†å¤–éƒ¨å˜é‡
3. å¯¹ES6è¯­ä¹‰ä¸æ˜¯ç‰¹åˆ«ä¸¥æ ¼çš„ï¼Œå¯ä»¥å¼€å¯babelçš„looseæ¨¡å¼ï¼Œrollup shakingèƒ½åŠ›æé«˜å¾ˆå¤š
4. uglifyæœ‰pure_getter: trueçš„é…ç½®ï¼Œä¸è¿‡ä¸å»ºè®®ä½¿ç”¨
5. Reactçš„hooksæœ‰åˆ©äºtree shakingï¼Œå› ä¸ºtree shakingå¯¹å‡½æ•°çš„æ•ˆæœæ›´å¥½